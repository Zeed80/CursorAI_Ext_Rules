# Автономное расширение CursorAI

Автономное агентское расширение для CursorAI, которое автоматически адаптирует правила под проект, дописывает и улучшает их, использует MCP Context7 и веб-поиск, включает оркестратор ролей и систему самаризации контекста.

## Структура проекта

```
.cursor/
├── agents/                    # Агенты системы
│   ├── orchestrator.mdc      # Главный оркестратор
│   ├── rule-manager.mdc      # Менеджер правил
│   └── context-manager.mdc   # Менеджер контекста
├── rules/                     # Правила проекта
│   ├── core/                 # Основные правила
│   │   ├── project-core.mdc
│   │   ├── code-quality.mdc
│   │   ├── deep-analysis.mdc
│   │   └── orchestrator.mdc
│   ├── roles/                 # Роли агентов
│   │   ├── backend.mdc
│   │   ├── frontend.mdc
│   │   ├── architect.mdc
│   │   ├── analyst.mdc
│   │   ├── devops.mdc
│   │   └── qa.mdc
│   ├── adaptive/              # Адаптивные правила
│   │   ├── main-system-prompt.mdc
│   │   ├── project-analyzer.mdc
│   │   ├── rule-generator.mdc
│   │   ├── rule-optimizer.mdc
│   │   ├── context-summarizer.mdc
│   │   ├── mcp-context7-integration.mdc
│   │   └── web-search-integration.mdc
│   └── rules-index.mdc       # Индекс правил
├── config/                    # Конфигурация
│   ├── project-profile.json   # Профиль проекта
│   └── adaptation-log.json    # Лог адаптаций
└── README.md                   # Документация
```

## Быстрый старт

### 1. Первый запуск

При первом открытии проекта система автоматически:
- Анализирует проект (project-analyzer)
- Определяет технологический стек
- Генерирует адаптивные правила (rule-generator)
- Создает профиль проекта

### 2. Использование

Просто работайте с проектом как обычно. Система автоматически:
- Выбирает подходящие роли для задач
- Проверяет код через MCP Context7
- Проверяет факты через веб-поиск
- Оптимизирует контекст при необходимости

### 3. Ручное управление

Вы можете запросить:
- "Проанализируй проект" - запустить анализ проекта
- "Сгенерируй правила" - сгенерировать правила для проекта
- "Оптимизируй правила" - оптимизировать существующие правила
- "Оптимизируй контекст" - оптимизировать размер контекста
- "Обнови правила" - обновить правила для проекта

## Компоненты системы

### Оркестратор

Главный координатор системы, который:
- Анализирует запросы пользователя
- Выбирает подходящие роли
- Координирует работу агентов
- Контролирует качество решений

### Project Analyzer

Анализирует проект и определяет:
- Тип проекта (веб-приложение, мобильное, desktop, библиотека)
- Технологический стек (языки, фреймворки, библиотеки)
- Архитектурные паттерны
- Стиль кода

### Rule Generator

Генерирует правила на основе:
- Анализа кодовой базы
- Найденных паттернов
- Технологического стека
- Архитектурных решений

### Rule Optimizer

Оптимизирует правила:
- Удаляет дубликаты
- Объединяет похожие правила
- Сжимает для уменьшения контекста
- Создает иерархию правил

### Context Summarizer

Самаризирует контекст:
- Сжимает без потери смысла
- Приоритизирует правила
- Кэширует результаты
- Оптимизирует использование токенов

### Rule Manager

Управляет правилами:
- Автоматически обновляет при изменении проекта
- Адаптирует под текущий проект
- Версионирует правила
- Логирует изменения

### Context Manager

Управляет контекстом:
- Отслеживает размер контекста
- Кэширует самаризированный контекст
- Приоритизирует правила
- Оптимизирует загрузку

## Интеграции

### MCP Context7

Система автоматически использует MCP Context7 для:
- Проверки синтаксиса
- Получения документации
- Проверки API
- Поиска примеров

### Веб-поиск

Система автоматически использует веб-поиск для:
- Проверки актуальности библиотек
- Поиска best practices
- Проверки безопасности
- Решения специфичных проблем

## Конфигурация

### project-profile.json

Профиль проекта содержит:
- Тип проекта
- Технологический стек
- Архитектурные паттерны
- Стиль кода

### adaptation-log.json

Лог адаптаций содержит:
- История изменений правил
- Причины изменений
- Версии правил
- Статистику оптимизаций

## Оптимизация

### Лимиты контекста

- Критичный лимит: 100k токенов
- Предупреждение: 80k токенов
- Оптимальный размер: 50k токенов

### Автоматическая оптимизация

Система автоматически:
- Самаризирует контекст при превышении лимита
- Оптимизирует правила раз в неделю
- Обновляет правила при изменении проекта
- Кэширует часто используемые правила

## Роли агентов

### Backend Developer
- PHP, PostgreSQL, OPDS
- Безопасность, производительность
- API разработка

### Frontend Developer
- HTML5, CSS3, JavaScript
- UI/UX, доступность
- Responsive design

### Software Architect
- Архитектура, планирование
- Технический долг
- Roadmap

### Data Analyst
- Производительность
- Оптимизация
- Мониторинг

### DevOps Engineer
- Docker, деплой
- Инфраструктура
- Бэкапы

### QA Engineer
- Тестирование
- Качество кода
- Автоматизация

## Рабочий процесс

1. **Анализ запроса** - Оркестратор анализирует запрос
2. **Выбор ролей** - Выбираются подходящие роли
3. **Координация** - Координируется работа агентов
4. **Проверка качества** - Проверка через MCP Context7 и веб-поиск
5. **Предложение решения** - Предложение структурированного решения
6. **Реализация** - Реализация после утверждения
7. **Обновление правил** - Обновление правил при необходимости

## Критические правила

1. **НИКОГДА не галлюцинируй** - всегда проверяй через MCP Context7
2. **НИКОГДА не реализовывай без утверждения**
3. **ВСЕГДА проверяй зависимости** через codebase_search
4. **ВСЕГДА используй веб-поиск** для проверки фактов
5. **ВСЕГДА самаризируй контекст** при превышении лимитов
6. **ВСЕГДА пиши полный код** - никаких заглушек
7. **ВСЕГДА обновляй зависимые файлы** при изменениях
8. **ВСЕГДА пиши на русском языке** (комментарии, документация)

## Поддержка

Для вопросов и предложений:
- Проверьте документацию в правилах
- Используйте команды для ручного управления
- Просмотрите логи адаптаций

## Версионирование

Система версионирует:
- Правила (при изменении)
- Профиль проекта (при обновлении)
- Контекст (при самаризации)

Все версии сохраняются для возможности отката.
